<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIì™€ í•¨ê»˜í•˜ëŠ” 12ì£¼ ìš´ë™ í”„ë¡œê·¸ë¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type ="text/javascript" src="apikey.js"></scirpt>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .gradient-text {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4ECDC4;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-50">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-black mb-2"><span class="gradient-text">ìš©ê°í•œ íƒí—˜ê°€ë¥¼ ìœ„í•œ 12ì£¼ ê±´ê°• ì±Œë¦°ì§€!</span></h1>
            <p class="text-lg text-gray-600">AI ìš”ì •ê³¼ í•¨ê»˜ ì‹ ë‚˜ëŠ” ìš´ë™ ëª¨í—˜ì„ ë– ë‚˜ì!</p>
        </header>

        <section class="mb-12">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                <div class="bg-white p-6 rounded-2xl shadow-lg border-l-4 border-[#FF6B6B]">
                    <h3 class="text-2xl font-bold text-[#FF6B6B]">3ë‹¨ê³„ ë¯¸ì…˜!</h3>
                    <p class="text-gray-600 mt-2">ì”¨ì•—, ì„±ì¥, ì—´ë§¤ ë‹¨ê³„ë¡œ<br>ì ì  ë” ê°•í•´ì§€ëŠ” ê±°ì•¼!</p>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-lg border-l-4 border-[#4ECDC4]">
                    <h3 class="text-2xl font-bold text-[#4ECDC4]">ë§¤ì¼ë§¤ì¼ ê¾¸ì¤€íˆ!</h3>
                    <p class="text-gray-600 mt-2">ìš´ë™ ìŠµê´€ì„ ê¸°ë¥´ë©´<br>ë§¤ì¼ë§¤ì¼ì´ ì¦ê±°ì›Œì ¸!</p>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-lg border-l-4 border-[#45B7D1]">
                    <h3 class="text-2xl font-bold text-[#45B7D1]">ë‚´ ëª¸ì˜ ì†Œë¦¬ ë“£ê¸°!</h3>
                    <p class="text-gray-600 mt-2">í˜ë“¤ê±°ë‚˜ ì•„í”„ë©´ ê¼­ ì‰¬ì–´ì¤˜.<br>ê°€ì¥ ì¤‘ìš”í•œ ê±´ ë„ˆì˜ ëª¸ì´ì•¼!</p>
                </div>
            </div>
        </section>
        
        <section class="mb-12 bg-white p-6 md:p-8 rounded-2xl shadow-xl">
            <h2 class="text-3xl font-bold text-center mb-2">âœ¨ AI ìš”ì •ì˜ ì˜¤ëŠ˜ì˜ ë¯¸ì…˜!</h2>
            <p class="text-center text-gray-600 mb-8">ë„ˆì˜ ì»¨ë””ì…˜ì— ë”± ë§ëŠ” ìš´ë™ ë¯¸ì…˜ì„ AI ìš”ì •ì´ ë§Œë“¤ì–´ì¤„ê²Œ!</p>
            <div class="max-w-2xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <div>
                        <label for="currentWeek" class="block text-sm font-medium text-gray-700">ì§€ê¸ˆ ëª‡ ì£¼ì°¨ì•¼?</label>
                        <select id="currentWeek" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                            <option value="1-4">1-4ì£¼ (ì”¨ì•—)</option>
                            <option value="5-8">5-8ì£¼ (ì„±ì¥)</option>
                            <option value="9-12">9-12ì£¼ (ì—´ë§¤)</option>
                        </select>
                    </div>
                    <div>
                        <label for="condition" class="block text-sm font-medium text-gray-700">ì˜¤ëŠ˜ ì»¨ë””ì…˜ì€ ì–´ë•Œ?</label>
                        <select id="condition" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                            <option>ì—ë„ˆì§€ê°€ ë„˜ì³!</option>
                            <option>ì¡°ê¸ˆ í”¼ê³¤í•´</option>
                            <option>ê·¸ëƒ¥ ê·¸ë˜</option>
                        </select>
                    </div>
                    <div>
                        <label for="location" class="block text-sm font-medium text-gray-700">ì–´ë””ì„œ ìš´ë™í• ê¹Œ?</label>
                        <select id="location" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                            <option>ì§‘ ì•ˆì—ì„œ</option>
                            <option>ì§‘ ë°–ì—ì„œ</option>
                        </select>
                    </div>
                </div>
                <button id="generateWorkoutBtn" class="w-full bg-gradient-to-r from-[#FF6B6B] to-[#4ECDC4] text-white font-bold py-3 px-4 rounded-md hover:opacity-90 transition-opacity">
                    âœ¨ ì˜¤ëŠ˜ì˜ ë¯¸ì…˜ ë°›ê¸°!
                </button>
                <div id="workoutResult" class="mt-6 p-4 border border-dashed border-gray-300 rounded-lg min-h-[100px] whitespace-pre-wrap">
                    <p class="text-gray-500 text-center">ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ ì˜¤ëŠ˜ í•  ìš´ë™ ë¯¸ì…˜ì„ ë°›ì•„ë´!</p>
                </div>
            </div>
        </section>

        <section class="mb-12">
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                <h2 class="text-3xl font-bold text-center mb-6">ìš°ë¦¬ì˜ ì„±ì¥ ê·¸ë˜í”„!</h2>
                <p class="text-center text-gray-600 mb-8">ìš°ë¦¬ê°€ ì–¼ë§ˆë‚˜ ì‘¥ì‘¥ ìë¼ëŠ”ì§€ ë´! ë¬´ë¦¬í•˜ì§€ ì•Šê³  ê±´ê°•í•˜ê²Œ ì„±ì¥í•˜ëŠ” ê²Œ ê°€ì¥ ì¤‘ìš”í•´.</p>
                <div class="chart-container">
                    <canvas id="progressionChart"></canvas>
                </div>
            </div>
        </section>

        <section class="mb-12">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                    <h2 class="text-3xl font-bold text-center mb-6">ê³¨ê³ ë£¨ íŠ¼íŠ¼ íŒŒì›Œ!</h2>
                    <p class="text-center text-gray-600 mb-8">ìœ ì‚°ì†Œ, ê·¼ë ¥, í˜¸í¡ ìš´ë™ì„ <br> ê³¨ê³ ë£¨ í•´ì„œ ëª¸ì„ íŠ¼íŠ¼í•˜ê²Œ ë§Œë“¤ì!</p>
                    <div class="chart-container h-[300px] md:h-[350px]">
                        <canvas id="exerciseTypeChart"></canvas>
                    </div>
                </div>

                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                     <h2 class="text-3xl font-bold text-center mb-6">ë‚˜ì˜ ë¹„ë°€ ìš´ë™ ë¬´ê¸°!</h2>
                     <p class="text-center text-gray-600 mb-8">ì—¬ê¸° ë©‹ì§„ ìš´ë™ë“¤ì´ ë§ì•„! ë„¤ê°€ ì¢‹ì•„í•˜ëŠ” ê±¸ ê³¨ë¼ì„œ ë” ì‹ ë‚˜ê²Œ ìš´ë™í•´ë´!</p>
                    <div class="space-y-4">
                        <div class="p-4 rounded-lg bg-[#FF6B6B] bg-opacity-10">
                            <div class="flex justify-between items-center">
                                <h3 class="font-bold text-lg text-[#FF6B6B]">ğŸƒ ìŒ©ìŒ© ìœ ì‚°ì†Œ</h3>
                                <button class="new-idea-btn bg-[#FF6B6B] text-white text-xs font-bold py-1 px-2 rounded-full" data-type="ìœ ì‚°ì†Œ">âœ¨ ìƒˆ ì•„ì´ë””ì–´</button>
                            </div>
                            <p class="text-gray-700 mt-2" data-content="ìœ ì‚°ì†Œ">ê±·ê¸°, ì¡°ê¹…, ìì „ê±° íƒ€ê¸°, ì¶¤ì¶”ê¸°</p>
                        </div>
                        <div class="p-4 rounded-lg bg-[#4ECDC4] bg-opacity-10">
                            <div class="flex justify-between items-center">
                                <h3 class="font-bold text-lg text-[#4ECDC4]">ğŸ’ª ë¶ˆëˆ ê·¼ë ¥</h3>
                                <button class="new-idea-btn bg-[#4ECDC4] text-white text-xs font-bold py-1 px-2 rounded-full" data-type="ê·¼ë ¥">âœ¨ ìƒˆ ì•„ì´ë””ì–´</button>
                            </div>
                            <p class="text-gray-700 mt-2" data-content="ê·¼ë ¥">ë²½ ë°€ê¸°, ê°œêµ¬ë¦¬ ì í”„, ê³°ì²˜ëŸ¼ ê±·ê¸°</p>
                        </div>
                        <div class="p-4 rounded-lg bg-[#45B7D1] bg-opacity-10">
                            <h3 class="font-bold text-lg text-[#45B7D1]">ğŸ˜®â€ğŸ’¨ í›„í•˜ í˜¸í¡</h3>
                            <p class="text-gray-700 mt-2">í’ì„  ë¶ˆê¸°, ë°° ìœ„ì— ì¸í˜• ì˜¬ë¦¬ê³  ìˆ¨ì‰¬ê¸°</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8">ë‹¨ê³„ë³„ ì±Œë¦°ì§€!</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

                <div class="bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col">
                    <div class="p-6 bg-[#FF6B6B] text-white text-center">
                        <h3 class="text-2xl font-bold">ğŸŒ± 1ë‹¨ê³„: ì”¨ì•— í‹”ìš°ê¸°</h3>
                    </div>
                    <div class="p-6 flex-grow">
                        <p class="font-bold mb-2">ë¯¸ì…˜: ìš´ë™ì´ë‘ ì¹œí•´ì§€ê¸°, ê¸°ì´ˆ ì²´ë ¥ ê¸°ë¥´ê¸°</p>
                        <ul class="list-none space-y-2 text-gray-700">
                            <li><span class="font-bold text-black">íŒŒì›Œ ë ˆë²¨:</span> í¸ì•ˆí•˜ê²Œ</li>
                            <li><span class="font-bold text-black">ìš´ë™ ì‹œê°„:</span> ì•½ 40-50ë¶„</li>
                            <li class="font-bold text-black mt-4">ì¶”ì²œ í™œë™:</li>
                            <li>- ê³µì›ì—ì„œ ì‹ ë‚˜ê²Œ ì‚°ì±…í•˜ê¸°</li>
                            <li>- ì§‘ì—ì„œ ì¿µì¿µ ì œìë¦¬ ê±·ê¸°</li>
                            <li>- íˆì–´ë¡œ ë³€ì‹ ! ê·¼ë ¥ ìš´ë™ (1-2ì„¸íŠ¸)</li>
                        </ul>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col">
                    <div class="p-6 bg-[#4ECDC4] text-white text-center">
                        <h3 class="text-2xl font-bold">ğŸ’ª 2ë‹¨ê³„: ì‘¥ì‘¥ ìë¼ê¸°</h3>
                    </div>
                    <div class="p-6 flex-grow">
                        <p class="font-bold mb-2">ë¯¸ì…˜: ì‹¬ì¥ íŠ¼íŠ¼! ê·¼ë ¥ ì‘¥ì‘¥!</p>
                        <ul class="list-none space-y-2 text-gray-700">
                            <li><span class="font-bold text-black">íŒŒì›Œ ë ˆë²¨:</span> ì¡°ê¸ˆ í˜ë“¤ê²Œ</li>
                            <li><span class="font-bold text-black">ìš´ë™ ì‹œê°„:</span> ì•½ 55-60ë¶„</li>
                            <li class="font-bold text-black mt-4">ì¶”ì²œ í™œë™:</li>
                            <li>- ë°”ëŒì²˜ëŸ¼ ê°€ë³ê²Œ ì¡°ê¹…í•˜ê¸°</li>
                            <li>- ì”©ì”©í•˜ê²Œ ë™ë„¤ ì–¸ë• ì˜¤ë¥´ê¸°</li>
                            <li>- íŒŒì›Œ ì—…! ê·¼ë ¥ ìš´ë™ (2-3ì„¸íŠ¸)</li>
                        </ul>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col">
                    <div class="p-6 bg-[#45B7D1] text-white text-center">
                        <h3 class="text-2xl font-bold">ğŸ† 3ë‹¨ê³„: ì—´ë§¤ ë§ºê¸°</h3>
                    </div>
                    <div class="p-6 flex-grow">
                        <p class="font-bold mb-2">ë¯¸ì…˜: ìš´ë™ ë§ˆìŠ¤í„°! ê±´ê°• ìŠµê´€ ì™„ì„±!</p>
                        <ul class="list-none space-y-2 text-gray-700">
                            <li><span class="font-bold text-black">íŒŒì›Œ ë ˆë²¨:</span> ì¡°ê¸ˆ ë” í˜ë‚´ì„œ!</li>
                            <li><span class="font-bold text-black">ìš´ë™ ì‹œê°„:</span> ì•½ 60ë¶„</li>
                            <li class="font-bold text-black mt-4">ì¶”ì²œ í™œë™:</li>
                            <li>- ë” ë©€ë¦¬! ì‹ ë‚˜ê²Œ ì¡°ê¹…í•˜ê¸°</li>
                            <li>- ì¹œêµ¬ë‘ ì¬ë¯¸ìˆëŠ” ê³µë†€ì´</li>
                            <li>- ìµœì¢… ë³´ìŠ¤! ê·¼ë ¥ ìš´ë™ (3ì„¸íŠ¸)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-12 bg-white p-6 md:p-8 rounded-2xl shadow-xl">
            <h2 class="text-3xl font-bold text-center mb-2">âœ¨ ìš´ë™ ë! ì˜¤ëŠ˜ ëŠë‚Œì€ ì–´ë• ì–´?</h2>
            <p class="text-center text-gray-600 mb-8">ì˜¤ëŠ˜ ìš´ë™ì´ ì–¼ë§ˆë‚˜ í˜ë“¤ì—ˆëŠ”ì§€ ì•„ë˜ ê·¸ë¦¼ì„ ëˆŒëŸ¬ì„œ ì•Œë ¤ì¤˜!</p>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto" id="rpe-checker">
                <div class="rpe-option p-4 bg-green-100 rounded-lg text-center cursor-pointer transform hover:scale-105 transition-transform" data-rpe="easy">
                    <div class="text-5xl">ğŸ˜„</div>
                    <p class="font-bold mt-2 text-green-800">ì•„ì£¼ ì‰¬ì› ì–´!</p>
                    <p class="text-sm text-green-600">(RPE 8-10)</p>
                </div>
                <div class="rpe-option p-4 bg-blue-100 rounded-lg text-center cursor-pointer transform hover:scale-105 transition-transform" data-rpe="good">
                    <div class="text-5xl">ğŸ™‚</div>
                    <p class="font-bold mt-2 text-blue-800">ë”± ì¢‹ì•˜ì–´!</p>
                    <p class="text-sm text-blue-600">(RPE 11-13)</p>
                </div>
                <div class="rpe-option p-4 bg-orange-100 rounded-lg text-center cursor-pointer transform hover:scale-105 transition-transform" data-rpe="hard">
                    <div class="text-5xl">ğŸ˜¥</div>
                    <p class="font-bold mt-2 text-orange-800">ì¡°ê¸ˆ í˜ë“¤ì—ˆì–´</p>
                    <p class="text-sm text-orange-600">(RPE 14-16)</p>
                </div>
                <div class="rpe-option p-4 bg-red-100 rounded-lg text-center cursor-pointer transform hover:scale-105 transition-transform" data-rpe="very_hard">
                    <div class="text-5xl">ğŸ¥µ</div>
                    <p class="font-bold mt-2 text-red-800">ë§ì´ í˜ë“¤ì—ˆì–´</p>
                    <p class="text-sm text-red-600">(RPE 17+)</p>
                </div>
            </div>
            <div id="rpeResult" class="mt-6 text-center text-lg font-bold min-h-[50px] p-4 rounded-lg"></div>
        </section>

        <footer class="text-center mt-12 py-8 border-t">
            <button id="generateSnackBtn" class="mb-6 bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold py-3 px-6 rounded-full hover:opacity-90 transition-opacity">
                âœ¨ ìš´ë™ ë! ì—ë„ˆì§€ ì¶©ì „ ê°„ì‹!
            </button>
            <p class="font-bold text-xl text-gray-800">12ì£¼ ì±Œë¦°ì§€ ì„±ê³µì„ ì¶•í•˜í•´!</p>
            <p class="text-gray-600 mt-2">ë„Œ ì •ë§ ë©‹ì§„ ìš´ë™ íƒí—˜ê°€ì•¼! ì•ìœ¼ë¡œë„ ì¦ê±°ìš´ ìš´ë™ ëª¨í—˜ì„ ê³„ì†í•´ì¤˜!</p>
            <p class="text-sm text-gray-500 mt-4">ìš´ë™ì„ ì‹œì‘í•˜ê¸° ì „ì—ëŠ” ê¼­ ë¶€ëª¨ë‹˜, ì˜ì‚¬ ì„ ìƒë‹˜ê³¼ ì´ì•¼ê¸°í•˜ëŠ” ê²ƒ ìŠì§€ ë§ˆ!</p>
        </footer>

    </div>

    <div id="snackModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 relative">
            <button id="closeModalBtn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">&times;</button>
            <h3 class="text-2xl font-bold text-center mb-4 gradient-text">AI ìš”ì •ì˜ ê°„ì‹ ì¶”ì²œ!</h3>
            <div id="snackResult" class="min-h-[150px] whitespace-pre-wrap"></div>
        </div>
    </div>

    <script>
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=`;
        const API_KEY = config.apikey;

        const callGemini = async (prompt, element) => {
            element.innerHTML = '<div class="loader"></div>';
            
            const payload = {
                contents: [{
                    role: "user",
                    parts: [{ text: prompt }]
                }]
            };

            try {
                const response = await fetch(API_URL + API_KEY, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API call failed with status: ${response.status}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    element.innerHTML = text;
                } else {
                    element.textContent = "ë¯¸ì•ˆ, ì§€ê¸ˆì€ ë‹µë³€ì„ ë§Œë“¤ ìˆ˜ ì—†ì–´. ì¡°ê¸ˆ ë’¤ì— ë‹¤ì‹œ í•´ì¤˜!";
                }
            } catch (error) {
                console.error("Error calling Gemini API:", error);
                element.textContent = "ì•—! ë¬¸ì œê°€ ìƒê²¼ì–´. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ í•´ë´!";
            }
        };

        document.getElementById('generateWorkoutBtn').addEventListener('click', () => {
            const week = document.getElementById('currentWeek').value;
            const condition = document.getElementById('condition').value;
            const location = document.getElementById('location').value;
            const workoutResultEl = document.getElementById('workoutResult');

            const prompt = `ë„ˆëŠ” ì‹¬ì¥ë³‘ì„ ê°€ì§„ ì–´ë¦°ì´ë¥¼ ìœ„í•œ ì¹œì ˆí•˜ê³  í™œê¸°ì°¬ ìš´ë™ ìš”ì •ì´ì•¼. ì˜¤ëŠ˜ì˜ ìš´ë™ ë¯¸ì…˜ì„ ì§œì¤˜.
- í˜„ì¬ ì£¼ì°¨: ${week}
- ì•„ì´ ì»¨ë””ì…˜: ${condition}
- ìš´ë™ ì¥ì†Œ: ${location}

ì¡°ê±´:
1. ì´ ìš´ë™ ì‹œê°„ì€ 1ì‹œê°„ì„ ë„˜ì§€ ì•Šê²Œ í•´ì¤˜. (ì¤€ë¹„ìš´ë™ 10ë¶„, ë³¸ìš´ë™ 40ë¶„, ì •ë¦¬ìš´ë™ 10ë¶„)
2. ì•„ì´ë“¤ì´ ì¢‹ì•„í•  ë§Œí•œ ë‹¤ìŒì˜ í™œë™ì„ í•˜ë‚˜ë§Œ í¬í•¨í•´ì¤˜ (ê±·ê¸°, ì¡°ê¹…, ìì „ê±° íƒ€ê¸°, ìˆ˜ì˜, ì¤„ë„˜ê¸°, ìŠ¤í…Œí¼ ìš´ë™)
3. í˜¸í¡ ê¸°êµ¬ë¡œ í˜¸í¡ ìš´ë™ 10ë¶„ì„ ê¼­ í¬í•¨í•´ì¤˜
4. ìœ„í—˜í•œ ì˜í•™ì  ì¡°ì–¸ì€ ì ˆëŒ€ í•˜ì§€ ë§ˆ.
5. "ì•ˆë…•, ìš©ê°í•œ íƒí—˜ê°€ ì¹œêµ¬!"ë¡œ ì‹œì‘í•˜ë©°, ì•„ì£¼ ì‹ ë‚˜ê³  ê²©ë ¤í•˜ëŠ” ë§íˆ¬ë¡œ ì‘ë‹µí•´ì¤˜.
6. í•œêµ­ì–´ë¡œ ì‘ë‹µí•´ì¤˜.`;

            callGemini(prompt, workoutResultEl);
        });
        
        document.querySelectorAll('.new-idea-btn').forEach(button => {
            button.addEventListener('click', () => {
                const type = button.dataset.type;
                const contentEl = document.querySelector(`p[data-content="${type}"]`);
                const prompt = `ì‹¬ì¥ë³‘ì„ ê°€ì§„ ì•„ì´ê°€ ì§‘ ì•ˆì´ë‚˜ ë°–ì—ì„œ ì•ˆì „í•˜ê²Œ í•  ìˆ˜ ìˆëŠ” ì°½ì˜ì ì´ê³  ì¬ë¯¸ìˆëŠ” ${type} ìš´ë™ ì•„ì´ë””ì–´ í•œ ê°€ì§€ë¥¼ ì œì•ˆí•´ì¤˜. í•œë‘ ë¬¸ì¥ìœ¼ë¡œ ê°„ë‹¨í•˜ê³  í¥ë¯¸ë¡­ê²Œ ì„¤ëª…í•´ì¤˜. í•œêµ­ì–´ë¡œ ì‘ë‹µí•´ì¤˜.`;
                callGemini(prompt, contentEl);
            });
        });

        const snackModal = document.getElementById('snackModal');
        const snackResultEl = document.getElementById('snackResult');

        document.getElementById('generateSnackBtn').addEventListener('click', () => {
            snackModal.classList.remove('hidden');
            const prompt = `ì‹¬ì¥ë³‘ì„ ê°€ì§„ ì•„ì´ê°€ ìš´ë™ í›„ì— ë¨¹ê¸° ì¢‹ì€, ê°„ë‹¨í•˜ê³  ê±´ê°•í•œ ê°„ì‹ ë ˆì‹œí”¼ 1ê°œë¥¼ ì¶”ì²œí•´ì¤˜.
ì¡°ê±´:
1. ì•„ì´ë“¤ì´ ì¢‹ì•„í•  ë§Œí•œ ì¬ë¯¸ìˆëŠ” ì´ë¦„ì„ ë¶™ì—¬ì¤˜.
2. êµ¬í•˜ê¸° ì‰¬ìš´ ì¬ë£Œë¥¼ ì‚¬ìš©í•´ì¤˜.
3. ë§Œë“œëŠ” ë°©ë²•ì´ ì•„ì£¼ ê°„ë‹¨í•´ì•¼ í•´.
4. ì•„ë˜ í˜•ì‹ì— ë§ì¶° í•œêµ­ì–´ë¡œ ì‘ë‹µí•´ì¤˜.
**ì´ë¦„:** [ë ˆì‹œí”¼ ì´ë¦„]
**ì¬ë£Œ:** [ì¬ë£Œ ëª©ë¡]
**ë§Œë“œëŠ” ë²•:** [ê°„ë‹¨í•œ ë‹¨ê³„ë³„ ì„¤ëª…]`;
            callGemini(prompt, snackResultEl);
        });
        
        document.getElementById('closeModalBtn').addEventListener('click', () => {
            snackModal.classList.add('hidden');
        });

        snackModal.addEventListener('click', (e) => {
            if (e.target === snackModal) {
                snackModal.classList.add('hidden');
            }
        });

        const rpeOptions = document.querySelectorAll('.rpe-option');
        const rpeResultEl = document.getElementById('rpeResult');
        const rpeMessages = {
            easy: { text: "ì¢‹ì•˜ì–´! ì—ë„ˆì§€ê°€ ë„˜ì¹˜ëŠ”êµ¬ë‚˜! ë‹¤ìŒì—” ì¡°ê¸ˆ ë” í˜ë‚´ë³¼ê¹Œ?", class: "bg-green-100 text-green-800" },
            good: { text: "ìµœê³ ì•¼! ë„ˆì—ê²Œ ë”± ë§ëŠ” ìš´ë™ì´ì—ˆêµ¬ë‚˜! ì •ë§ ë©‹ì ¸!", class: "bg-blue-100 text-blue-800" },
            hard: { text: "ì •ë§ ì—´ì‹¬íˆ í–ˆêµ¬ë‚˜! ë•€ í˜ë¦¬ëŠ” ëª¨ìŠµì´ ìµœê³ ì•¼! í‘¹ ì‰¬ëŠ” ê²ƒë„ ìŠì§€ ë§ˆ!", class: "bg-orange-100 text-orange-800" },
            very_hard: { text: "ëŒ€ë‹¨í•´! ëª¨ë“  í˜ì„ ë‹¤ ì¼êµ¬ë‚˜! ì˜¤ëŠ˜ì€ í‘¹ ì‰¬ê³  ë‚´ì¼ì€ ì¡°ê¸ˆë§Œ ì‚´ì‚´ í•˜ì!", class: "bg-red-100 text-red-800" }
        };

        rpeOptions.forEach(option => {
            option.addEventListener('click', () => {
                const rpeLevel = option.dataset.rpe;
                const message = rpeMessages[rpeLevel];

                rpeResultEl.textContent = message.text;
                rpeResultEl.className = `mt-6 text-center text-lg font-bold min-h-[50px] p-4 rounded-lg ${message.class}`;
                
                rpeOptions.forEach(opt => opt.classList.remove('ring-4', 'ring-offset-2', 'ring-yellow-400'));
                option.classList.add('ring-4', 'ring-offset-2', 'ring-yellow-400');
            });
        });

        const wrapLabel = (str, maxWidth) => {
            if (str.length <= maxWidth) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + word).length > maxWidth && currentLine.length > 0) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            lines.push(currentLine.trim());
            return lines;
        };

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            return Array.isArray(label) ? label.join(' ') : label;
        };
        
        const progressionCtx = document.getElementById('progressionChart').getContext('2d');
        new Chart(progressionCtx, {
            type: 'line',
            data: {
                labels: ['1-2ì£¼', '3-4ì£¼', '5-6ì£¼', '7-8ì£¼', '9-10ì£¼', '11-12ì£¼'],
                datasets: [
                    {
                        label: 'ì´ ìš´ë™ ì‹œê°„ (ë¶„)',
                        data: [40, 47.5, 57.5, 60, 60, 60],
                        borderColor: '#FF6B6B',
                        backgroundColor: 'rgba(255, 107, 107, 0.2)',
                        fill: true,
                        tension: 0.4,
                        yAxisID: 'y'
                    },
                    {
                        label: 'íŒŒì›Œ ë ˆë²¨ (RPE)',
                        data: [9.5, 9.5, 12, 12, 13, 13],
                        borderColor: '#4ECDC4',
                        backgroundColor: 'rgba(78, 205, 196, 0.2)',
                        fill: false,
                        tension: 0.4,
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                stacked: false,
                plugins: {
                    title: { display: false },
                    tooltip: { callbacks: { title: tooltipTitleCallback } }
                },
                scales: {
                    y: {
                        type: 'linear', display: true, position: 'left',
                        title: { display: true, text: 'ì‹œê°„ (ë¶„)', color: '#FF6B6B' },
                        min: 30, max: 70
                    },
                    y1: {
                        type: 'linear', display: true, position: 'right',
                        title: { display: true, text: 'íŒŒì›Œ ë ˆë²¨', color: '#4ECDC4' },
                        grid: { drawOnChartArea: false },
                        min: 8, max: 15
                    },
                    x: { grid: { display: false } }
                }
            }
        });

        const exerciseTypeCtx = document.getElementById('exerciseTypeChart').getContext('2d');
        new Chart(exerciseTypeCtx, {
            type: 'doughnut',
            data: {
                labels: ['ìœ ì‚°ì†Œ', 'ê·¼ë ¥', 'í˜¸í¡'],
                datasets: [{
                    label: 'ì£¼ê°„ ìš´ë™ êµ¬ì„±',
                    data: [50, 30, 20],
                    backgroundColor: ['#FF6B6B', '#4ECDC4', '#45B7D1'],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom' },
                    title: { display: false },
                    tooltip: { callbacks: { title: tooltipTitleCallback } }
                }
            }
        });
    </script>
</body>
</html>
